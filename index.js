import { DefaultAzureCredential, getBearerTokenProvider } from "@azure/identity";


import { AzureOpenAI } from "openai";


const deployment = "gpt-4o";
const apiVersion = "2024-08-01-preview";
const client = new AzureOpenAI({ endpoint: "https://bansa-m5ut6z6d-northcentralus.openai.azure.com/", apiKey: "Cy9TDTcXJUEVc40ywZYvHklU8kl1AvH0fvZ3oQMH4q3cLAlTJa5jJQQJ99BAACHrzpqXJ3w3AAAAACOGTbAX", deployment, apiVersion });

const response = await client.chat.completions.create({
    messages: [
        {
            role: "system",
            content:
                "``` You are a Context-Aware Document Structure Analyzer. Your primary tasks are: \n\n1. STRUCTURAL CONTINUITY:  \n   - Maintain consistent document structure across multiple processing chunks  \n   - Preserve relationships between previous and new content segments  \n- Increment sequence numbers appropriately  \n\n 2. CONTEXT INTEGRATION:  \n\n   - Use provided previous JSON context to: \n     * Continue ID numbering sequence  \n     * Maintain parent/child relationships across chunks \n * Preserve cross-segment references  \n\n3. STRUCTURAL ANALYSIS:  \n - Categorize content using provided types (TITLE/H1/BODY_TEXT/etc.)  \n\n  - Identify hierarchical relationships (parent/children/siblings)  \n   - Detect list/table continuations from previous chunks  \n4. OUTPUT REQUIREMENTS:  \n   - Strictly follow the JSON schema below  \n   - Never duplicate existing IDs from previous JSON  \n   - Always include document_metadata.version from previous context  \n\n- Add 'continued' flag when extending tables/lists across chunks   ```",
        },
        {
            role:"user",
            content:"Title: Integrated Systems Manual - Version 1.2\\n\\nIntroduction\\nThis manual provides a comprehensive overview of the integrated systems, combining technical guidelines, research findings, and corporate policies. It is designed for use by all personnel involved in the operation, maintenance, and oversight of these systems.\\n\\nSection 1: Technical Guide to System Operations\\n\\n1.1 System Architecture Overview\\nThe integrated system comprises multiple interconnected modules, each responsible for specific functionalities. These modules include the primary processing unit, data storage arrays, network interfaces, and power management subsystems. The architecture is designed to ensure high availability and fault tolerance, with redundant components and failover mechanisms in place.\\n\\n1.2 Operation Procedures\\nDaily operations involve monitoring system performance, executing routine tasks, and responding to alerts. Operators should familiarize themselves with the control panel interface and the standard operating procedures (SOPs) detailed in Appendix A. Key operational tasks include:\\n\\n- System startup and shutdown\\n- Monitoring dashboards and logs\\n- Executing diagnostic tests\\n- Performing data backups\\n\\n1.3 Maintenance Guidelines\\nRegular maintenance is crucial for system longevity and reliability. Scheduled maintenance activities include hardware inspections, software updates, and performance tuning. Refer to Section 3 for detailed maintenance schedules and procedures. Preventative maintenance should be performed quarterly, while corrective maintenance should be undertaken as needed in response to identified issues.\\n\\nSection 2: Research Insights on System Efficiency\\n\\n2.1 Abstract\\nRecent research has focused on optimizing system efficiency and performance. This section summarizes key findings from a study conducted on the integrated systems, highlighting areas for potential improvement and optimization strategies.\\n\\n2.2 Key Findings\\n- Workload Distribution: Analysis indicates that uneven workload distribution among processing units can lead to bottlenecks. Implementing dynamic load balancing algorithms can improve overall system throughput by up to 25%.\\n- Data Storage Optimization: The study reveals that optimizing data storage access patterns can significantly reduce latency. Recommendations include implementing data caching strategies and optimizing database indexing.\\n- Energy Consumption: Research suggests that power consumption can be reduced by optimizing the power management settings of idle components. Implementing a smart power management policy can yield energy savings of approximately 15% without impacting performance.\\n\\n2.3 Implications for Future Development\\nThese research insights provide valuable guidance for future system development and upgrades. Emphasis should be placed on incorporating advanced algorithms for workload management, optimizing data storage, and enhancing energy efficiency. These improvements will contribute to a more robust, efficient, and sustainable system.\\n\\nSection 3: Corporate Policy for System Usage\\n\\n3.1 Policy Statement\\nThis policy outlines the guidelines for system usage, access control, and data security. All employees and contractors must comply with this policy to ensure the integrity and confidentiality of system data and resources.\\n\\n3.2 Access Control\\nAccess to the integrated systems is restricted to authorized personnel only. Each user will be assigned a unique identifier and password. Sharing of login credentials is strictly prohibited. Access levels will be determined based on job roles and responsibilities. Regular audits of user access rights will be conducted.\\n\\n3.3 Data Security\\nData security is of paramount importance. All sensitive data must be encrypted both in transit and at rest. Users must adhere to data handling procedures outlined in the company's data security policy. Any data breaches or security incidents must be reported immediately to the IT security department.\\n\\n3.4 Acceptable Use\\nThe integrated systems are to be used solely for business purposes. Any personal use is strictly prohibited. Users must not engage in any activities that could compromise system security or performance. Prohibited activities include unauthorized access attempts, installation of unauthorized software, and any form of cyber misconduct.\\n\\n3.5 Compliance and Enforcement\\nCompliance with this policy is mandatory. Violations may result in disciplinary action, up to and including termination of employment or contract. The IT department will monitor system usage to ensure compliance and will investigate any suspected policy violations.\\n\\nConclusion\\nThis manual serves as a comprehensive guide to the integrated systems, encompassing technical operations, research-based insights, and corporate policies. Adherence to the guidelines and procedures outlined herein will ensure the efficient, secure, and effective use of these critical systems. Regular review and updates will be made to this manual to reflect changes in technology, research findings, and corporate policy.\\n\\nAppendix A: Standard Operating Procedures (SOPs)\\nDetailed SOPs for various system operations are provided in this appendix. These procedures should be followed meticulously to ensure consistent and safe operation of the system. SOPs are subject to periodic review and updates.\\n\\nAppendix B: Maintenance Schedules\\nA comprehensive schedule for routine and preventative maintenance activities is provided in this appendix. Adherence to this schedule is essential for maintaining system health and preventing unscheduled downtime. The schedule includes daily, weekly, monthly, and quarterly tasks.\\n\\nAppendix C: Glossary of Terms\\nA glossary of technical terms used in this manual is provided for easy reference. This glossary defines key concepts and acronyms related to the integrated systems.\\n\\nAppendix D: Contact Information\\nContact details for the IT support team and system administrators are listed in this appendix. Users should use these contacts for reporting issues, seeking assistance, or requesting further information related to the integrated systems."

        }
    ],
    max_tokens: 16384,
    model: "gpt-4o",
    response_format: { type: "json_object" }

});

console.log(response.choices[0].message.content);
console.log("\n\n\n");
console.log(response)